<head>
    <meta charset="UTF-8">
    <title>CIA - Compañia Arte y Vida</title>
    <link rel="stylesheet" href="Styles.css" />
</head>

<body>
   
        <header>
            <center>
                <h1>CIA - Compañía Arte y Vida</h1>
            </center>
            <nav aria-label="Navegación principal">
                <button id="menu-toggle" aria-label="Abrir menú" aria-expanded="false"
                    style="background:none;border:none;color:#22d3ee;font-size:2rem;cursor:pointer;display:none;">
                    &#9776;
                </button>
                <ul id="main-menu" style="transition:max-height 0.4s;overflow:hidden;">
                    <li><a href="#acerca">Acerca</a></li>
                    <li><a href="#eventos">Eventos</a></li>
                    <li><a href="#FILBO2025">FILBO2025</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                    <li><a href="admin.html" aria-label="Área administrativa">Admin</a></li>
                </ul>
            </nav>
            <script>
                function handleMenuDisplay() {
                    const btn = document.getElementById('menu-toggle');
                    const menu = document.getElementById('main-menu');
                    if (window.innerWidth <= 640) {
                        btn.style.display = 'inline-block';
                        // Si está expandido, mostrar todos los elementos
                        if (btn.getAttribute('aria-expanded') === 'true') {
                            menu.style.maxHeight = menu.scrollHeight + 'px';
                        } else {
                            // Siempre calcular el scrollHeight para todos los elementos
                            menu.style.maxHeight = '0';
                        }
                    } else {
                        btn.style.display = 'none';
                        menu.style.maxHeight = 'none';
                    }
                }
                document.getElementById('menu-toggle').addEventListener('click', function () {
                    const menu = document.getElementById('main-menu');
                    const expanded = this.getAttribute('aria-expanded') === 'true';
                    this.setAttribute('aria-expanded', !expanded);
                    // Forzar recalcular el scrollHeight para mostrar todos los elementos
                    if (!expanded) {
                        menu.style.maxHeight = menu.scrollHeight + 'px';
                    } else {
                        menu.style.maxHeight = '0';
                    }
                });
                window.addEventListener('resize', handleMenuDisplay);
                document.addEventListener('DOMContentLoaded', handleMenuDisplay);
            </script>
        </header>
        <main>
            <section id="acerca" tabindex="0" aria-label="Acerca de CIA">
                <div class="card">
                    <br>
                    <h2>COMPAÑIA ARTE Y VIDA</h2>
                    <div class="fakeimg" style="height:200px;">
                        <center><img src="img/CIA1.jpg" alt="CIA"></center>
                    </div>
                    <br>
                    <br>
                    <br>
                    <br>
                    <p>La Compañía Arte y Vida (CIA) es un grupo dedicado a la promoción y difusión del teatro en vivo.
                        Nuestra misión es acercar obras teatrales innovadoras y emocionantes para todos los públicos.
                    </p>
                </div>
            </section>

            <section id="eventos" tabindex="0" aria-label="Lista de eventos">
                <h2>Eventos Próximos</h2>
                <div id="eventContainer" aria-live="polite" aria-atomic="true">
                    <!-- Eventos cargados dinámicamente aparecerán aquí -->
                </div>
            </section>

            <section id="FILBO2025" tabindex="0" aria-label="FILBO2025">
                <h2>FILBO2025</h2>
                <div class="filbo-galeria">
                    <h3>Participación en la FILBO2025</h3>
                    <div class="galeria-videos">
                        <video controls loop src="img/Entrevista-Filbo.mp4" type="video/mp4"></video>
                        <video controls loop src="Videos/lalamachuca.mp4" type="video/mp4"></video>
                        <div id="video-container"
                            style="position: relative; width: 560px; height: 315px; margin: auto;">
                            <img src="img/Luci-Lila.png" alt="Miniatura del conversatorio FILBO"
                                style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px; cursor: pointer;"
                                onclick="mostrarVideo()">
                        </div>

                        <script>
                            function mostrarVideo() {
                                const container = document.getElementById('video-container');
                                container.innerHTML = `
                            <iframe 
                                src="https://drive.google.com/file/d/1oMfOYNwG6f1fJ42onartlg53zGLy-3Di/preview" 
                                width="560" 
                                height="315" 
                                frameborder="0" 
                                allow="autoplay; clipboard-write; encrypted-media; picture-in-picture" 
                                allowfullscreen 
                                style="border-radius: 12px;">
                            </iframe>
                            `;
                            }
                        </script>


                    </div>
                </div>
               
            </section>

            <section id="contacto" tabindex="0" aria-label="Contacto con CIA">
                <h2>Contacto</h2>
                <form id="contactForm" autocomplete="on"
                    style="max-width: 480px; margin: 0 auto; background: rgba(15,23,42,0.7); padding: 2rem; border-radius: 14px; box-shadow: 0 2px 12px rgba(20,184,166,0.15);">
                    <div style="margin-bottom: 1rem;">
                        <label for="nombre" style="display:block; font-weight:500; margin-bottom:0.3em;">Nombre</label>
                        <input type="text" id="nombre" name="nombre" required
                            style="width:100%; padding:0.5em; border-radius:8px; border:1px solid #14b8a6; background:#1e293b; color:#e0e7ff;">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label for="email" style="display:block; font-weight:500; margin-bottom:0.3em;">Email</label>
                        <input type="email" id="email" name="email" required
                            style="width:100%; padding:0.5em; border-radius:8px; border:1px solid #14b8a6; background:#1e293b; color:#e0e7ff;">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label for="mensaje"
                            style="display:block; font-weight:500; margin-bottom:0.3em;">Mensaje</label>
                        <textarea id="mensaje" name="mensaje" rows="4" required
                            style="width:100%; padding:0.5em; border-radius:8px; border:1px solid #14b8a6; background:#1e293b; color:#e0e7ff;"></textarea>
                    </div>
                    <button type="submit" class="btn-comprar" style="width:100%;">Enviar</button>
                    <div id="formMsg" style="margin-top:1rem; color:#22d3ee; font-weight:500; display:none;"></div>
                </form>
                <script>
                    document.getElementById('contactForm').addEventListener('submit', function (e) {
                        e.preventDefault();
                        // Obtener datos del formulario
                        const nombre = document.getElementById('nombre').value;
                        const email = document.getElementById('email').value;
                        const mensaje = document.getElementById('mensaje').value;
                        // Guardar en localStorage (puedes usar un array para varios mensajes)
                        let mensajes = [];
                        try {
                            mensajes = JSON.parse(localStorage.getItem('cia_contact_msgs')) || [];
                        } catch { }
                        const fecha = new Date();
                        const opciones = {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric',
                            hour: 'numeric',
                            minute: '2-digit',
                            hour12: true,
                            timeZone: 'America/Bogota'
                        };
                        const fechaFormateada = fecha.toLocaleString('es-CO', opciones);

                        mensajes.push({ nombre, email, mensaje, fecha: fechaFormateada });
                        localStorage.setItem('cia_contact_msgs', JSON.stringify(mensajes));
                        // Mostrar mensaje de éxito
                        document.getElementById('formMsg').style.display = 'block';
                        document.getElementById('formMsg').textContent = '¡Gracias por contactarnos! Pronto responderemos tu mensaje.';
                        this.reset();
                    });
                </script>
            </section>
        </main>
        <footer>
            <p>&copy; 2025 CIA - Compañía Arte y Vida. Todos los derechos reservados.</p>
            <br>
            <hr>
            <p>
               <a href="mailto:grupoarteyvida@gmail.com?subject=Información%20sobre%20sus%20servicios&body=Hola,%20quisiera%20recibir%20más%20información%20sobre%20sus%20servicios.">Solicita información</a> 
                &nbsp;|&nbsp;
                <a href="https://wa.me/573125913006" target="_blank" rel="noopener" aria-label="Contactar por WhatsApp"
                    style="display:inline-flex;align-items:center;background:#25D366;color:#fff;padding:0.4em 1em;border-radius:8px;font-weight:600;text-decoration:none;box-shadow:0 2px 8px rgba(37,211,102,0.18);transition:background 0.2s;">
                    <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" alt="WhatsApp"
                        style="width:1.3em;vertical-align:middle;margin-right:0.5em;filter:invert(1);">WhatsApp
                </a>
            </p>
        </footer>

        <script>
            // Función para cargar eventos desde localStorage y mostrarlos dinámicamente
            function loadAndDisplayEvents() {
                const eventContainer = document.getElementById('eventContainer');
                eventContainer.innerHTML = ''; // limpiar
                const stored = localStorage.getItem('cia_events');
                if (!stored) {
                    eventContainer.innerHTML = '<p>No hay eventos disponibles en este momento.</p>';
                    return;
                }
                let events;
                try {
                    events = JSON.parse(stored);
                } catch {
                    eventContainer.innerHTML = '<p>Error cargando eventos.</p>';
                    return;
                }
                if (!Array.isArray(events) || events.length === 0) {
                    eventContainer.innerHTML = '<p>No hay eventos disponibles en este momento.</p>';
                    return;
                }

                events.forEach(ev => {
                    // Crear contenedor de evento
                    const eventDiv = document.createElement('article');
                    eventDiv.className = 'evento';
                    eventDiv.tabIndex = 0;

                    // Construir innerHTML con título, fecha, hora, descripción y botón comprar
                    eventDiv.innerHTML = `
                    <div>
                        <h3>${ev.title}</h3>
                        <p class="fecha">Fecha: ${ev.date} - ${ev.time}</p>
                        <p>${ev.description}</p>
                    </div>
                    <a href="VentaBoletos.html" class="btn-comprar" role="button" aria-label="Comprar boletos para ${ev.title}">Comprar Boletos</a>
                    `;

                    eventContainer.appendChild(eventDiv);
                });
            }

            // Ejecutar al cargar DOM
            document.addEventListener('DOMContentLoaded', loadAndDisplayEvents);
        </script>

    </body>

    </html>

    <!-- ---------------------------------------------------------------------------------------------------------------------------------------------------------------- -->

    <!-- Cortinas y botón -->
    <div class="curtain left"></div>
    <div class="curtain right"></div>
    <div class="curtain-btn-container">
        <center>
            <h1>Biendenidos a la CIA - Compañia Arte y Vida</h1>

            <button class="curtain-btn">
                <span class="text-question">¿Quieres continuar?</span>
                <span class="text-continue">Continuar</span>
                <span class="arrow">&#8594;</span>
            </button>
        </center>
    </div>
    <script>
        const btn = document.querySelector('.curtain-btn');
        btn.addEventListener('click', function () {
            document.querySelector('.curtain.left').classList.add('open');
            document.querySelector('.curtain.right').classList.add('open');
            document.body.classList.add('curtain-open');
            setTimeout(() => {
                document.querySelector('.curtain.left').style.display = 'none';
                document.querySelector('.curtain.right').style.display = 'none';
                document.querySelector('.curtain-btn-container').style.display = 'none';
            }, 1200);
        });
    </script>
</body>
